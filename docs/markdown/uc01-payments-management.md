# ΠΧ1. Διαχείριση Πληρωμών

**Πρωτεύων Actor**: Διαχειριστής  
**Ενδιαφερόμενοι** 
**Διαχειριστής**: Θέλει να εκτελεί ενέργειες συμψηφισμού των οφειλών του εκάστοτε χρήστη. 
**Χρήστης**: Θέλει να λαμβάνει έγκριση για τις συναλλαγές του.   
**Προϋποθέσεις**: Ο Διαχειριστής έχει εκτελέσει με επιτυχία την περίπτωση χρήσης “Ταυτοποίηση Διαχειριστή” και την περίπτωση χρήσης “Προβολή Πληροφορίας Διαχειριστή / Προβολή Ειδοποιήσεων”.  

## Βασική Ροή

### Α) Φυσική Πληρωμή

1. Ο Διαχειριστής αναζητεί το προφιλ του Χρήστη βάσει id χρήστη.
2. Το σύστημα εμφανίζει τα στοιχεία του προφίλ (id, ονοματεπώνυμο, οφειλές).
3. Ο Διαχειριστής επιλέγει το προφίλ και εκτελεί αίτημα συμψηφισμού.
4. Το σύστημα ζητάει το ποσό της πληρωμής και αιτιολογία πληρωμής.
5. Ο Διαχειριστής εισάγει τα απαιτούμενα στοιχεία και επιβεβαιώνει τη συναλλαγή.
6. Το σύστημα αφαιρεί το ποσό από το υπόλοιπο οφειλών του χρήστη.
7. Το σύστημα βγάζει μήνυμα επιτυχίας και προβάλει τις υπολοιπόμενες οφειλές.

**Εναλλακτικές Ροές**

*2α. Δεν βρέθηκε προφίλ για το συγκεκριμένο id.*  
1. Το σύστημα εμφανίζει μήνυμα σφάλματος και η περίπτωση χρήσης τερματίζει.

*3α. Δεν υπάρχουν οφειλές για το συγκεκριμένο id.*
1. Το σύστημα εμφανίζει αντίστοιχο μήνυμα και η περίπτωση χρήσης τερματίζει.

*6a. Το δοθέν ποσό υπερβαίνει τις οφειλές του χρήστη*
1. Το σύστημα εμφανίζει μήνυμα σφάλματος και προβάλει τις οφειλές του χρήστη
2. Η ΠΧ επιστρέφει στο βήμα 4 της βασικής ροής

### Β) Ηλεκτρονική Πληρωμή

1. Ο Διαχειριστής επιλέγει προβολή ειδοποίησης ηλεκτρονικής πληρωμής
2. Το σύστημα προβάλει τα στοιχεία του εμπλεκόμενου χρήστη (id, ονοματεπώνυμο, προηγούμενες οφειλές, ενημερωμένες οφειλές) και τα στοιχεία της πληρωμής (id, κωδικός πληρωμής, τράπεζα κατάθεσης). 
